{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/question.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../option/option.component\";\nconst _c0 = [\"comment\"];\nfunction QuestionComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function QuestionComponent_div_11_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.submit());\n    });\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3, \"Submit\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.progress != \"100\");\n  }\n}\nfunction QuestionComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21)(1, \"span\", 7);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Your Score: \", ctx_r1.quizResult, \"\");\n  }\n}\nfunction QuestionComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"span\", 7);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.textError);\n  }\n}\nfunction QuestionComponent_div_24_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"label\");\n    i0.ɵɵtext(2, \" Comment saved!\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction QuestionComponent_div_24_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 31)(1, \"span\", 7);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r8.textErrorComment);\n  }\n}\nfunction QuestionComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"label\", 24);\n    i0.ɵɵtext(2, \"Enter a comment: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 25, 26);\n    i0.ɵɵelementStart(5, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function QuestionComponent_div_24_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.saveComment());\n    });\n    i0.ɵɵtext(6, \" save comment \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, QuestionComponent_div_24_div_7_Template, 3, 0, \"div\", 28);\n    i0.ɵɵtemplate(8, QuestionComponent_div_24_div_8_Template, 3, 1, \"div\", 29);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"value\", ctx_r3.currentComment);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.currentComment != \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.textErrorComment != \"\");\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    width: a0\n  };\n};\nexport class QuestionComponent {\n  constructor(questionService) {\n    this.questionService = questionService;\n    this.name = '';\n    this.userId = '';\n    this.quizResult = '';\n    this.questionList = [];\n    this.currentQuestion = 0;\n    this.progress = '0';\n    this.answers = new Map();\n    this.currentComment = '';\n    this.textError = '';\n    this.textErrorComment = '';\n  }\n  ngOnInit() {\n    this.name = localStorage.getItem('name');\n    this.userId = localStorage.getItem('id');\n    this.getAllQuestions();\n  }\n  getAllQuestions() {\n    this.questionService.getQuestionJson().subscribe(res => {\n      this.questionList = res;\n      this.textError = '';\n    }, err => {\n      console.log(err);\n      this.textError = 'An error has occured, please try again later';\n    });\n  }\n  nextQuestion() {\n    this.currentQuestion = (this.currentQuestion + 1) % this.questionList.length;\n    this.currentComment = this.questionList[this.currentQuestion].comment ?? '';\n    this.textErrorComment = '';\n  }\n  previousQuestion() {\n    this.currentQuestion = this.currentQuestion - 1;\n    if (this.currentQuestion < 0) this.currentQuestion = this.questionList.length - 1;\n    this.currentComment = this.questionList[this.currentQuestion].comment ?? '';\n    this.textErrorComment = '';\n  }\n  setProgressPrecent() {\n    this.progress = (this.answers.size / this.questionList.length * 100).toString();\n  }\n  reset() {\n    for (let i = 0; i < this.questionList.length; i++) {\n      this.questionList[i].comment = '';\n    }\n    this.progress = '0';\n    this.currentQuestion = 0;\n    this.quizResult = '';\n    this.answers = new Map();\n    this.currentComment = '';\n    this.textErrorComment = '';\n  }\n  submit() {\n    let answersForEachQuestionScores = this.buildAnswers();\n    this.questionService.getQuizResult(answersForEachQuestionScores).subscribe(res => {\n      this.quizResult = res;\n      this.textError = '';\n    }, err => {\n      console.log(err);\n      this.textError = 'An error has occured, please try again later';\n    });\n  }\n  checkTextValid(text) {\n    return /^$|^[a-zA-ZÀ-ÖØ-öø-ÿ0-9 ]+$/.test(text);\n  }\n  buildAnswers() {\n    let answersForEachQuestionScores = [];\n    for (let i = 0; i < this.answers.size; i++) {\n      let options = this.answers.get(i) ?? [];\n      let answer = {\n        userId: this.userId,\n        questionId: this.questionList[i].id,\n        chosenOptions: options,\n        questionType: this.questionList[i].type,\n        comment: this.questionList[i].comment\n      };\n      answersForEachQuestionScores.push(answer);\n    }\n    return answersForEachQuestionScores;\n  }\n  saveComment() {\n    if (this.checkTextValid(this.commentkey.nativeElement.value)) {\n      this.questionList[this.currentQuestion].comment = this.commentkey.nativeElement.value;\n      this.currentComment = this.commentkey.nativeElement.value;\n      this.textErrorComment = '';\n    } else this.textErrorComment = 'Text should not contain any special character';\n  }\n  static #_ = this.ɵfac = function QuestionComponent_Factory(t) {\n    return new (t || QuestionComponent)(i0.ɵɵdirectiveInject(i1.QuestionService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: QuestionComponent,\n    selectors: [[\"app-question\"]],\n    viewQuery: function QuestionComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.commentkey = _t.first);\n      }\n    },\n    decls: 34,\n    vars: 14,\n    consts: [[1, \"container\", \"mt-5\"], [1, \"card\"], [1, \"d-flex\", \"justify-content-between\", \"p-3\"], [1, \"image\"], [\"src\", \"https://mario.nintendo.com/static/12a46ed6612384e88499f6c8593ef61b/e30b6/mario-unstack-closed.png\", \"width\", \"90\", \"alt\", \"logo\"], [1, \"quiz-header\"], [2, \"font-family\", \"cursive\", \"text-align\", \"center\"], [2, \"font-style\", \"italic\"], [1, \"d-flex\", \"justify-content-around\", \"py-3\"], [\"class\", \"question-remain\", 4, \"ngIf\"], [\"class\", \"quizResult\", 4, \"ngIf\"], [\"class\", \"textError\", 4, \"ngIf\"], [1, \"question-remain\"], [1, \"progress\", \"mb-3\"], [\"id\", \"progress-bar\", \"role\", \"progressbar\", \"aria-label\", \"Success striped example\", \"aria-valuenow\", \"25\", \"aria-valuemin\", \"0\", \"aria-valuemax\", \"100\", 1, \"progress-bar\", \"progress-bar-striped\", \"bg-success\", 2, \"width\", \"25%\", 3, \"ngStyle\"], [1, \"question\"], [3, \"currentQuestion\", \"answers\", \"questionList\", \"setProgressPrecent\"], [\"class\", \"comment\", 4, \"ngIf\"], [1, \"d-flex\", \"justify-content-between\"], [\"type\", \"button\", 3, \"click\"], [\"type\", \"button\", 3, \"disabled\", \"click\"], [1, \"quizResult\"], [1, \"textError\"], [1, \"comment\"], [\"for\", \"\"], [\"type\", \"text\", 1, \"form-control\", 3, \"value\"], [\"comment\", \"\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [\"class\", \"CommentSaved\", 4, \"ngIf\"], [\"class\", \"textErrorComment\", 4, \"ngIf\"], [1, \"CommentSaved\"], [1, \"textErrorComment\"]],\n    template: function QuestionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3);\n        i0.ɵɵelement(4, \"img\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 5)(6, \"h4\", 6);\n        i0.ɵɵtext(7, \"Mario Quiz!\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"span\", 7);\n        i0.ɵɵtext(9);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(10, \"div\", 8);\n        i0.ɵɵtemplate(11, QuestionComponent_div_11_Template, 4, 1, \"div\", 9);\n        i0.ɵɵtemplate(12, QuestionComponent_div_12_Template, 3, 1, \"div\", 10);\n        i0.ɵɵtemplate(13, QuestionComponent_div_13_Template, 3, 1, \"div\", 11);\n        i0.ɵɵelementStart(14, \"div\", 12)(15, \"span\", 7);\n        i0.ɵɵtext(16);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(17, \"div\", 13);\n        i0.ɵɵelement(18, \"div\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"div\", 15)(20, \"div\", 1)(21, \"h3\");\n        i0.ɵɵtext(22);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(23, \"app-option\", 16);\n        i0.ɵɵlistener(\"setProgressPrecent\", function QuestionComponent_Template_app_option_setProgressPrecent_23_listener() {\n          return ctx.setProgressPrecent();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(24, QuestionComponent_div_24_Template, 9, 3, \"div\", 17);\n        i0.ɵɵelementStart(25, \"div\", 18)(26, \"button\", 19);\n        i0.ɵɵlistener(\"click\", function QuestionComponent_Template_button_click_26_listener() {\n          return ctx.previousQuestion();\n        });\n        i0.ɵɵelementStart(27, \"span\");\n        i0.ɵɵtext(28, \"<<\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(29, \"button\", 19);\n        i0.ɵɵlistener(\"click\", function QuestionComponent_Template_button_click_29_listener() {\n          return ctx.reset();\n        });\n        i0.ɵɵtext(30, \"Reset\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"button\", 19);\n        i0.ɵɵlistener(\"click\", function QuestionComponent_Template_button_click_31_listener() {\n          return ctx.nextQuestion();\n        });\n        i0.ɵɵelementStart(32, \"span\");\n        i0.ɵɵtext(33, \">>\");\n        i0.ɵɵelementEnd()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵtextInterpolate1(\"Welcome \", ctx.name, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.quizResult == \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.quizResult != \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.textError != \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate2(\"Question \", ctx.currentQuestion + 1, \" of \", ctx.questionList.length, \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(12, _c1, ctx.progress + \"%\"));\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.questionList[ctx.currentQuestion] == null ? null : ctx.questionList[ctx.currentQuestion].questionText);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"currentQuestion\", ctx.currentQuestion)(\"answers\", ctx.answers)(\"questionList\", ctx.questionList);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", (ctx.questionList[ctx.currentQuestion] == null ? null : ctx.questionList[ctx.currentQuestion].type) === \"Multiple\");\n      }\n    },\n    dependencies: [i2.NgIf, i2.NgStyle, i3.OptionComponent],\n    styles: [\".card[_ngcontent-%COMP%] {\\r\\n  max-width: 800px;\\r\\n  margin: 0 auto;\\r\\n  padding: 10px;\\r\\n}\\r\\nli[_ngcontent-%COMP%] {\\r\\n  list-style-type: none;\\r\\n  cursor: pointer;\\r\\n  margin: 10px 0;\\r\\n}\\r\\nol[_ngcontent-%COMP%] {\\r\\n  padding: 0;\\r\\n}\\n/*# sourceURL=webpack://./src/app/question/question.component.css */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcXVlc3Rpb24vcXVlc3Rpb24uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGdCQUFnQjtFQUNoQixjQUFjO0VBQ2QsYUFBYTtBQUNmO0FBQ0E7RUFDRSxxQkFBcUI7RUFDckIsZUFBZTtFQUNmLGNBQWM7QUFDaEI7QUFDQTtFQUNFLFVBQVU7QUFDWiIsInNvdXJjZXNDb250ZW50IjpbIi5jYXJkIHtcclxuICBtYXgtd2lkdGg6IDgwMHB4O1xyXG4gIG1hcmdpbjogMCBhdXRvO1xyXG4gIHBhZGRpbmc6IDEwcHg7XHJcbn1cclxubGkge1xyXG4gIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgbWFyZ2luOiAxMHB4IDA7XHJcbn1cclxub2wge1xyXG4gIHBhZGRpbmc6IDA7XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"mappings":"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","names":["i0","QuestionComponent","constructor","questionService","Map","ngOnInit","name","localStorage","getItem","userId","getAllQuestions","getQuestionJson","subscribe","res","questionList","textError","err","console","log","nextQuestion","currentQuestion","length","currentComment","comment","textErrorComment","previousQuestion","setProgressPrecent","progress","answers","size","toString","reset","i","quizResult","submit","answersForEachQuestionScores","buildAnswers","getQuizResult","checkTextValid","text","test","options","get","answer","questionId","id","chosenOptions","questionType","type","push","saveComment","commentkey","nativeElement","value","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\97252\\source\\repos\\QuizProject\\ClientSide\\src\\app\\question\\question.component.html","C:\\Users\\97252\\source\\repos\\QuizProject\\ClientSide\\src\\app\\question\\question.component.ts"],"sourcesContent":["<div class=\"container mt-5\">\r\n  <div class=\"card\">\r\n    <div class=\"d-flex justify-content-between p-3\">\r\n      <div class=\"image\">\r\n        <img\r\n          src=\"https://mario.nintendo.com/static/12a46ed6612384e88499f6c8593ef61b/e30b6/mario-unstack-closed.png\"\r\n          width=\"90\"\r\n          alt=\"logo\"\r\n        />\r\n      </div>\r\n      <div class=\"quiz-header\">\r\n        <h4 style=\"font-family: cursive; text-align: center\">Mario Quiz!</h4>\r\n        <span style=\"font-style: italic\">Welcome {{ name }}</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"d-flex justify-content-around py-3\">\r\n      <div class=\"question-remain\" *ngIf=\"quizResult == ''\">\r\n        <button [disabled]=\"progress != '100'\" type=\"button\" (click)=\"submit()\">\r\n          <span>Submit</span>\r\n        </button>\r\n      </div>\r\n      <div class=\"quizResult\" *ngIf=\"quizResult != ''\">\r\n        <span style=\"font-style: italic\">Your Score: {{ quizResult }}</span>\r\n      </div>\r\n      <div class=\"textError\" *ngIf=\"textError != ''\">\r\n        <span style=\"font-style: italic\">{{ textError }}</span>\r\n      </div>\r\n      <div class=\"question-remain\">\r\n        <span style=\"font-style: italic\"\r\n          >Question {{ currentQuestion + 1 }} of {{ questionList.length }}</span\r\n        >\r\n      </div>\r\n    </div>\r\n    <div class=\"progress mb-3\">\r\n      <div\r\n        class=\"progress-bar progress-bar-striped bg-success\"\r\n        id=\"progress-bar\"\r\n        role=\"progressbar\"\r\n        [ngStyle]=\"{ width: progress + '%' }\"\r\n        aria-label=\"Success striped example\"\r\n        style=\"width: 25%\"\r\n        aria-valuenow=\"25\"\r\n        aria-valuemin=\"0\"\r\n        aria-valuemax=\"100\"\r\n      ></div>\r\n    </div>\r\n    <div class=\"question\">\r\n      <div class=\"card\">\r\n        <h3>{{ questionList[currentQuestion]?.questionText }}</h3>\r\n      </div>\r\n    </div>\r\n    <app-option\r\n  [currentQuestion]=\"currentQuestion\"\r\n  [answers]=\"answers\"\r\n  [questionList]=\"questionList\"\r\n  (setProgressPrecent)=\"setProgressPrecent()\">\r\n</app-option>\r\n    <div\r\n      class=\"comment\"\r\n      *ngIf=\"questionList[currentQuestion]?.type === 'Multiple'\"\r\n    >\r\n      <label for=\"\">Enter a comment: </label>\r\n      <input\r\n        #comment\r\n        type=\"text\"\r\n        class=\"form-control\"\r\n        value=\"{{ currentComment }}\"\r\n      />\r\n      <button class=\"btn btn-primary\" (click)=\"saveComment()\">\r\n        save comment\r\n      </button>\r\n      <div class=\"CommentSaved\" *ngIf=\"currentComment != ''\">\r\n        <label> Comment saved!</label>\r\n      </div>\r\n      <div class=\"textErrorComment\" *ngIf=\"textErrorComment != ''\">\r\n        <span style=\"font-style: italic\">{{ textErrorComment }}</span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"d-flex justify-content-between\">\r\n      <button type=\"button\" (click)=\"previousQuestion()\">\r\n        <span><<</span>\r\n      </button>\r\n      <button type=\"button\" (click)=\"reset()\">Reset</button>\r\n      <button type=\"button\" (click)=\"nextQuestion()\"><span>>></span></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { QuestionService } from '../service/question.service';\r\nimport { question, option, answer } from '../models/question';\r\nimport { Component, ViewChild, ElementRef } from '@angular/core';\r\n@Component({\r\n  selector: 'app-question',\r\n  templateUrl: './question.component.html',\r\n  styleUrls: ['./question.component.css'],\r\n})\r\nexport class QuestionComponent {\r\n  @ViewChild('comment') commentkey!: ElementRef;\r\n  public name: string = '';\r\n  public userId: string = '';\r\n  public quizResult: string = '';\r\n  public questionList: question[] = [];\r\n  public currentQuestion: number = 0;\r\n  public progress: string = '0';\r\n  answers = new Map<number, option[]>();\r\n  public currentComment: string = '';\r\n  textError: string = '';\r\n  textErrorComment: string = '';\r\n\r\n  constructor(private questionService: QuestionService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.name = localStorage.getItem('name')!;\r\n    this.userId = localStorage.getItem('id')!;\r\n    this.getAllQuestions();\r\n  }\r\n\r\n  getAllQuestions() {\r\n    this.questionService.getQuestionJson().subscribe(\r\n      (res: question[]) => {\r\n        this.questionList = res;\r\n        this.textError = '';\r\n      },\r\n      (err) => {\r\n        console.log(err);\r\n        this.textError = 'An error has occured, please try again later';\r\n      }\r\n    );\r\n  }\r\n\r\n  nextQuestion() {\r\n    this.currentQuestion =\r\n      (this.currentQuestion + 1) % this.questionList.length;\r\n\r\n    this.currentComment = this.questionList[this.currentQuestion].comment ?? '';\r\n    this.textErrorComment = '';\r\n  }\r\n\r\n  previousQuestion() {\r\n    this.currentQuestion = this.currentQuestion - 1;\r\n    if (this.currentQuestion < 0)\r\n      this.currentQuestion = this.questionList.length - 1;\r\n\r\n    this.currentComment = this.questionList[this.currentQuestion].comment ?? '';\r\n    this.textErrorComment = '';\r\n  }\r\n\r\n  setProgressPrecent() {\r\n    this.progress = (\r\n      (this.answers.size / this.questionList.length) *\r\n      100\r\n    ).toString();\r\n  }\r\n\r\n  reset() {\r\n    for (let i = 0; i < this.questionList.length; i++) {\r\n      this.questionList[i].comment = '';\r\n    }\r\n\r\n    this.progress = '0';\r\n    this.currentQuestion = 0;\r\n    this.quizResult = '';\r\n    this.answers = new Map<number, option[]>();\r\n    this.currentComment = '';\r\n    this.textErrorComment = '';\r\n  }\r\n\r\n  submit() {\r\n    let answersForEachQuestionScores: answer[] = this.buildAnswers();\r\n\r\n    this.questionService.getQuizResult(answersForEachQuestionScores).subscribe(\r\n      (res: string) => {\r\n        this.quizResult = res;\r\n        this.textError = '';\r\n      },\r\n      (err) => {\r\n        console.log(err);\r\n        this.textError = 'An error has occured, please try again later';\r\n      }\r\n    );\r\n  }\r\n\r\n  checkTextValid(text: string): boolean {\r\n    return /^$|^[a-zA-ZÀ-ÖØ-öø-ÿ0-9 ]+$/.test(text);\r\n  }\r\n\r\n  buildAnswers() {\r\n    let answersForEachQuestionScores: answer[] = [];\r\n    for (let i = 0; i < this.answers.size; i++) {\r\n      let options = this.answers.get(i) ?? [];\r\n      let answer: answer = {\r\n        userId: this.userId,\r\n        questionId: this.questionList[i].id,\r\n        chosenOptions: options,\r\n        questionType: this.questionList[i].type,\r\n        comment: this.questionList[i].comment,\r\n      };\r\n      answersForEachQuestionScores.push(answer);\r\n    }\r\n    return answersForEachQuestionScores;\r\n  }\r\n\r\n  saveComment() {\r\n    if (this.checkTextValid(this.commentkey.nativeElement.value)) {\r\n      this.questionList[this.currentQuestion].comment =\r\n        this.commentkey.nativeElement.value;\r\n      this.currentComment = this.commentkey.nativeElement.value;\r\n      this.textErrorComment = '';\r\n    } else\r\n      this.textErrorComment = 'Text should not contain any special character';\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}